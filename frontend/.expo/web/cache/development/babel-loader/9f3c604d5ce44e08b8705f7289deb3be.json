{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/jmgoncalves/git/agro-x/frontend/components/30-checkouts/checkout-details.tsx\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport dayjs from 'dayjs';\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter';\nimport { useMainSelector } from \"../../redux-things\";\nimport { BackHeader } from \"../00-common/back-header\";\nimport { InformationTable } from \"./information-table\";\nimport { asAliveOnlyScreenComponent } from \"../../src/utils/smart-lifecycle-components\";\nimport { scrollToEndAndBack } from \"../../src/utils\";\ndayjs.extend(isSameOrAfter);\nexport var CheckoutDetails = asAliveOnlyScreenComponent(function (_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var quotationPackages = useMainSelector(function (state) {\n    return state.backendData.quotationPackages;\n  });\n\n  function findQuotationPackageById(id) {\n    for (var _iterator = _createForOfIteratorHelperLoose(quotationPackages), _step; !(_step = _iterator()).done;) {\n      var pkg = _step.value;\n      if (pkg.id === id) return pkg;\n    }\n  }\n\n  function getFieldsByCheckout(checkout) {\n    var quotationPackage = findQuotationPackageById(checkout.quotation.quotation_modal_package.quotation_package.id);\n\n    for (var _iterator2 = _createForOfIteratorHelperLoose(quotationPackage.quotation_modal_package), _step2; !(_step2 = _iterator2()).done;) {\n      var modal = _step2.value;\n      if (modal.pulverization_method === checkout.quotation.quotation_modal_package.pulverization_method) return modal.field;\n    }\n\n    throw new Error('No field was found with using this checkout on the desired quotation package');\n  }\n\n  var flatListRef = useRef(null);\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      backgroundColor: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 3\n    }\n  }, React.createElement(BackHeader, {\n    title: \"Pulveriza\\xE7\\xE3o \" + route.params.checkoutGroup[0].quotation.quotation_modal_package.quotation_package.code,\n    onBackPress: function onBackPress() {\n      return navigation.goBack();\n    },\n    onNotificationPress: function onNotificationPress() {\n      return navigation.navigate('Notifications');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 4\n    }\n  }), React.createElement(FlatList, {\n    ref: flatListRef,\n    persistentScrollbar: true,\n    data: route.params.checkoutGroup,\n    renderItem: function renderItem(_ref2) {\n      var checkout = _ref2.item;\n      return React.createElement(InformationTable, {\n        key: checkout.id.toString(),\n        method: checkout.quotation.quotation_modal_package.pulverization_method,\n        company: checkout.quotation.company_id,\n        paymentMethod: checkout.selected_price === 0 ? 'antecipated_price' : checkout.selected_price === 1 ? 'cash_price' : 'delayed_price',\n        quotation: findQuotationPackageById(checkout.quotation.quotation_modal_package.quotation_package.id),\n        onDetailsPress: function onDetailsPress() {\n          navigation.navigate('Details', {\n            method: checkout.quotation.quotation_modal_package.pulverization_method,\n            fields: getFieldsByCheckout(checkout)\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 6\n        }\n      });\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item.id.toString();\n    },\n    onLayout: function onLayout() {\n      return scrollToEndAndBack(flatListRef, 'flatlist');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 4\n    }\n  }));\n});","map":{"version":3,"sources":["/home/jmgoncalves/git/agro-x/frontend/components/30-checkouts/checkout-details.tsx"],"names":["React","useRef","dayjs","isSameOrAfter","useMainSelector","BackHeader","InformationTable","asAliveOnlyScreenComponent","scrollToEndAndBack","extend","CheckoutDetails","navigation","route","quotationPackages","state","backendData","findQuotationPackageById","id","pkg","getFieldsByCheckout","checkout","quotationPackage","quotation","quotation_modal_package","quotation_package","modal","pulverization_method","field","Error","flatListRef","flex","backgroundColor","params","checkoutGroup","code","goBack","navigate","item","toString","company_id","selected_price","method","fields"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport { View, FlatList } from 'react-native';\n\nimport dayjs from 'dayjs';\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter';\nimport { useMainSelector } from '../../redux-things';\nimport { BackHeader } from '../00-common/back-header';\nimport { InformationTable } from './information-table';\nimport { AgroXScreenProps } from '../navigation-types';\nimport { asAliveOnlyScreenComponent } from '../../src/utils/smart-lifecycle-components';\nimport { Models } from '../../models';\nimport { scrollToEndAndBack } from '../../src/utils';\n\ndayjs.extend(isSameOrAfter);\n\nexport const CheckoutDetails = asAliveOnlyScreenComponent(({ navigation, route }: AgroXScreenProps<'CheckoutDetails'>) => {\n\tconst quotationPackages = useMainSelector((state) => state.backendData.quotationPackages)!;\n\tfunction findQuotationPackageById(id: number) {\n\t\tfor (const pkg of quotationPackages) if (pkg.id === id) return pkg;\n\t}\n\n\tfunction getFieldsByCheckout(checkout: Models.quotation_checkout) {\n\t\tconst quotationPackage = findQuotationPackageById(checkout.quotation!.quotation_modal_package.quotation_package.id);\n\t\tfor (const modal of quotationPackage!.quotation_modal_package)\n\t\t\tif (modal.pulverization_method === checkout.quotation!.quotation_modal_package.pulverization_method) return modal.field;\n\t\tthrow new Error('No field was found with using this checkout on the desired quotation package');\n\t}\n\n\tconst flatListRef = useRef<FlatList>(null);\n\treturn (\n\t\t<View style={{ flex: 1, backgroundColor: 'white' }}>\n\t\t\t<BackHeader\n\t\t\t\ttitle={`Pulverização ${route.params.checkoutGroup[0].quotation!.quotation_modal_package.quotation_package.code}`}\n\t\t\t\tonBackPress={() => navigation.goBack()}\n\t\t\t\tonNotificationPress={() => navigation.navigate('Notifications')}\n\t\t\t/>\n\n\t\t\t<FlatList\n\t\t\t\tref={flatListRef}\n\t\t\t\tpersistentScrollbar\n\t\t\t\tdata={route.params.checkoutGroup}\n\t\t\t\trenderItem={({ item: checkout }) => (\n\t\t\t\t\t<InformationTable\n\t\t\t\t\t\tkey={checkout.id.toString()}\n\t\t\t\t\t\tmethod={checkout.quotation!.quotation_modal_package.pulverization_method}\n\t\t\t\t\t\tcompany={checkout.quotation!.company_id}\n\t\t\t\t\t\tpaymentMethod={checkout.selected_price === 0 ? 'antecipated_price' : checkout.selected_price === 1 ? 'cash_price' : 'delayed_price'}\n\t\t\t\t\t\tquotation={findQuotationPackageById(checkout.quotation!.quotation_modal_package.quotation_package.id)!}\n\t\t\t\t\t\tonDetailsPress={() => {\n\t\t\t\t\t\t\tnavigation.navigate('Details', {\n\t\t\t\t\t\t\t\tmethod: checkout.quotation!.quotation_modal_package.pulverization_method,\n\t\t\t\t\t\t\t\tfields: getFieldsByCheckout(checkout),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tkeyExtractor={(item) => item.id.toString()}\n\t\t\t\tonLayout={() => scrollToEndAndBack(flatListRef, 'flatlist')}\n\t\t\t/>\n\t\t</View>\n\t);\n});\n"]},"metadata":{},"sourceType":"module"}