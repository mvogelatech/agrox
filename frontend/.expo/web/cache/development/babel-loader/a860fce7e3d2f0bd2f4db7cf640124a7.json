{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/jmgoncalves/git/agro-x/frontend/components/hiring-review/index.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { createTStyleSheet } from \"../../src/utils/style\";\nimport { ClosableHeader } from \"../00-common\";\nimport { useIsOffline } from \"../../redux-things\";\nimport { Button } from 'react-native-paper';\nimport { displayAlert, needsToBeOnline, confirmQuotationLeave, displayTimeoutErrorSnackbar } from \"../../src/utils/alert-messages\";\nimport { asAliveOnlyScreenComponent } from \"../../src/utils/smart-lifecycle-components\";\nimport { WaitOverlay } from \"../00-common/wait-overlay\";\nimport { WHATSAPP_DEFAULT_NUMBER } from \"../drawer-constants\";\n\nfunction requestDiagnostic(newRequest) {\n  var area, talhao, msg, ret;\n  return _regeneratorRuntime.async(function requestDiagnostic$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          area = _toConsumableArray(new Set(newRequest.flatMap(function (field) {\n            return field.area_id;\n          }))).slice().sort(undefined).join(', ');\n          talhao = _toConsumableArray(new Set(newRequest.flatMap(function (field) {\n            return field.name.split(' ')[1];\n          }))).slice().sort(undefined).join(', ');\n          msg = \"\\\"Time Agroexplore, Favor atender as seguintes demandas de contrata\\xE7\\xE3o de diagn\\xF3sticos.\\\" \\n\\n \\xC1rea(s): \" + area + \" \\n Talh\\xF5es: \" + talhao;\n          _context.prev = 3;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(Linking.openURL(\"whatsapp://send?text=\" + msg + \"&phone=\" + WHATSAPP_DEFAULT_NUMBER));\n\n        case 6:\n          ret = _context.sent;\n          return _context.abrupt(\"return\", ret);\n\n        case 10:\n          _context.prev = 10;\n          _context.t0 = _context[\"catch\"](3);\n          console.log(_context.t0);\n          displayAlert({\n            title: \"Informa\\xE7\\xE3o\",\n            body: \"N\\xE3o foi poss\\xEDvel abrir o WhatsApp, favor entrar em contato pelo telefone: \" + WHATSAPP_DEFAULT_NUMBER,\n            buttonText: 'Ok'\n          });\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[3, 10]], Promise);\n}\n\nexport var HiringReview = asAliveOnlyScreenComponent(function (_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var isOnline = !useIsOffline();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showIndicator = _useState2[0],\n      setShowIndicator = _useState2[1];\n\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 3\n    }\n  }, showIndicator ? React.createElement(WaitOverlay, {\n    text: \"Aguarde\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  }) : undefined, React.createElement(ClosableHeader, {\n    onBackPress: function onBackPress() {\n      navigation.goBack();\n    },\n    onClose: function onClose() {\n      void confirmQuotationLeave(navigation);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }\n  }), React.createElement(View, {\n    style: styles.mainView,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 4\n    }\n  }, React.createElement(View, {\n    style: styles.contentView,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.titleText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 6\n    }\n  }, \"Confira os talh\\xF5es selecionados para serem diagnosticados\"), React.createElement(View, {\n    style: styles.gridView,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 6\n    }\n  }, route.params.selectedFields.map(function (field) {\n    return React.createElement(Text, {\n      key: field.id.toString(),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 8\n      }\n    }, field.name);\n  }))), React.createElement(Button, {\n    uppercase: false,\n    mode: \"contained\",\n    style: styles.button,\n    labelStyle: styles.buttonText,\n    onPress: function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (isOnline) {\n                setShowIndicator(true);\n\n                try {\n                  navigation.navigate('FeedbackDiagnostic');\n                } catch (error) {\n                  setShowIndicator(false);\n                  displayTimeoutErrorSnackbar(error, 'Post Quotation');\n                }\n              } else {\n                displayAlert(needsToBeOnline);\n              }\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, \"Contratar\")));\n});\nvar styles = createTStyleSheet({\n  mainView: {\n    flex: 1,\n    backgroundColor: 'white',\n    paddingHorizontal: '16rem',\n    justifyContent: 'space-between'\n  },\n  titleText: {\n    paddingLeft: '8rem',\n    paddingVertical: '8rem',\n    fontSize: '23rem'\n  },\n  contentView: {},\n  button: {\n    marginVertical: '24rem',\n    height: '45rem',\n    justifyContent: 'center',\n    width: '100%'\n  },\n  buttonText: {\n    fontSize: '14rem'\n  }\n});","map":{"version":3,"sources":["/home/jmgoncalves/git/agro-x/frontend/components/hiring-review/index.tsx"],"names":["React","useState","createTStyleSheet","ClosableHeader","useIsOffline","Button","displayAlert","needsToBeOnline","confirmQuotationLeave","displayTimeoutErrorSnackbar","asAliveOnlyScreenComponent","WaitOverlay","WHATSAPP_DEFAULT_NUMBER","requestDiagnostic","newRequest","area","Set","flatMap","field","area_id","slice","sort","undefined","join","talhao","name","split","msg","Linking","openURL","ret","console","log","title","body","buttonText","HiringReview","navigation","route","isOnline","showIndicator","setShowIndicator","flex","goBack","styles","mainView","contentView","titleText","gridView","params","selectedFields","map","id","toString","button","navigate","error","backgroundColor","paddingHorizontal","justifyContent","paddingLeft","paddingVertical","fontSize","marginVertical","height","width"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { View, Text, Linking } from 'react-native';\nimport { createTStyleSheet } from '../../src/utils/style';\n\nimport { ClosableHeader } from '../00-common';\nimport { AgroXScreenProps } from '../navigation-types';\n\nimport { Models } from '../../models';\nimport { useIsOffline } from '../../redux-things';\n// import { ky } from '../../src/network/ky';\nimport { Button } from 'react-native-paper';\nimport { displayAlert, needsToBeOnline, confirmQuotationLeave, displayTimeoutErrorSnackbar } from '../../src/utils/alert-messages';\nimport { asAliveOnlyScreenComponent } from '../../src/utils/smart-lifecycle-components';\nimport { WaitOverlay } from '../00-common/wait-overlay';\nimport { WHATSAPP_DEFAULT_NUMBER } from '../drawer-constants';\n\ntype ScreenProps = AgroXScreenProps<'HiringReview'>;\n\nasync function requestDiagnostic(newRequest: Models.field[]) {\n\t// const createdQuotation = await ky\n\t// \t.post('diagnostic', {\n\t// \t\tjson: {\n\t// \t\t\tfields: newRequest,\n\t// \t\t},\n\t// \t})\n\t// \t.json<Models.field>();\n\tconst area = [...new Set(newRequest.flatMap((field: any) => field.area_id))].slice().sort(undefined).join(', ');\n\tconst talhao = [...new Set(newRequest.flatMap((field: any) => field.name.split(' ')[1]))].slice().sort(undefined).join(', ');\n\tconst msg = `\"Time Agroexplore, Favor atender as seguintes demandas de contratação de diagnósticos.\" \\n\\n Área(s): ${area} \\n Talhões: ${talhao}`;\n\ttry {\n\t\tconst ret = await Linking.openURL(`whatsapp://send?text=${msg}&phone=${WHATSAPP_DEFAULT_NUMBER}`);\n\t\treturn ret;\n\t} catch (error) {\n\t\tconsole.log(error);\n\t\tdisplayAlert({\n\t\t\ttitle: `Informação`,\n\t\t\tbody: `Não foi possível abrir o WhatsApp, favor entrar em contato pelo telefone: ${WHATSAPP_DEFAULT_NUMBER}`,\n\t\t\tbuttonText: 'Ok',\n\t\t});\n\t}\n\t// dispatch({ type: 'BACKEND_DATA__POSTED_NEW_QUOTATION_PACKAGE', package: createdQuotation });\n}\n\nexport const HiringReview = asAliveOnlyScreenComponent(({ navigation, route }: ScreenProps) => {\n\tconst isOnline = !useIsOffline();\n\n\tconst [showIndicator, setShowIndicator] = useState(false);\n\n\treturn (\n\t\t<View style={{ flex: 1 }}>\n\t\t\t{showIndicator ? <WaitOverlay text=\"Aguarde\" /> : undefined}\n\t\t\t<ClosableHeader\n\t\t\t\tonBackPress={() => {\n\t\t\t\t\tnavigation.goBack();\n\t\t\t\t}}\n\t\t\t\tonClose={() => {\n\t\t\t\t\tvoid confirmQuotationLeave(navigation);\n\t\t\t\t}}\n\t\t\t/>\n\n\t\t\t<View style={styles.mainView}>\n\t\t\t\t<View style={styles.contentView}>\n\t\t\t\t\t<Text style={styles.titleText}>Confira os talhões selecionados para serem diagnosticados</Text>\n\t\t\t\t\t<View style={styles.gridView}>\n\t\t\t\t\t\t{route.params.selectedFields.map((field) => (\n\t\t\t\t\t\t\t<Text key={field.id.toString()}>{field.name}</Text>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</View>\n\t\t\t\t</View>\n\n\t\t\t\t<Button\n\t\t\t\t\tuppercase={false}\n\t\t\t\t\tmode=\"contained\"\n\t\t\t\t\tstyle={styles.button}\n\t\t\t\t\tlabelStyle={styles.buttonText}\n\t\t\t\t\tonPress={async () => {\n\t\t\t\t\t\tif (isOnline) {\n\t\t\t\t\t\t\tsetShowIndicator(true);\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t// console.log('teste do rele', route.params.selectedFields);\n\t\t\t\t\t\t\t\t// await requestDiagnostic(route.params.selectedFields);\n\t\t\t\t\t\t\t\tnavigation.navigate('FeedbackDiagnostic');\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tsetShowIndicator(false);\n\t\t\t\t\t\t\t\tdisplayTimeoutErrorSnackbar(error, 'Post Quotation');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdisplayAlert(needsToBeOnline);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tContratar\n\t\t\t\t</Button>\n\t\t\t</View>\n\t\t</View>\n\t);\n});\n\nconst styles = createTStyleSheet({\n\tmainView: {\n\t\tflex: 1,\n\t\tbackgroundColor: 'white',\n\t\tpaddingHorizontal: '16rem',\n\t\tjustifyContent: 'space-between',\n\t},\n\ttitleText: {\n\t\tpaddingLeft: '8rem',\n\t\tpaddingVertical: '8rem',\n\t\tfontSize: '23rem',\n\t},\n\tcontentView: {},\n\tbutton: {\n\t\tmarginVertical: '24rem',\n\t\theight: '45rem',\n\t\tjustifyContent: 'center',\n\t\twidth: '100%',\n\t},\n\tbuttonText: {\n\t\tfontSize: '14rem',\n\t},\n});\n"]},"metadata":{},"sourceType":"module"}