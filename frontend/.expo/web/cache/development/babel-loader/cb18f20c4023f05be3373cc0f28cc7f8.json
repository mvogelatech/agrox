{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/jmgoncalves/git/agro-x/frontend/components/drawer-content.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Clipboard from \"react-native-web/dist/exports/Clipboard\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { Divider, Avatar } from 'react-native-paper';\nimport { DrawerItem, DrawerContentScrollView } from '@react-navigation/drawer';\nimport { createTStyleSheet } from \"../src/utils/style\";\nimport { images } from \"../src/assets\";\nimport { RoleTypeFarmManager } from \"../models\";\nimport { DrawerActions } from '@react-navigation/native';\nimport { userSignOut } from \"../src/network/auth\";\nimport { debug, isDebugModeEnabled, clearDebug, getDebugValue } from \"../src/debug\";\nimport { REM_SCALE } from \"../src/utils\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { displayAlert } from \"../src/utils/alert-messages\";\nimport { ky } from \"../src/network/ky\";\nimport { WHATSTAPP_DEFAULT_URL, DEFAULT_AVATAR_B64, WHATSAPP_DEFAULT_NUMBER } from \"./drawer-constants\";\n\nfunction retrieveUserAvatar(user_id) {\n  var res;\n  return _regeneratorRuntime.async(function retrieveUserAvatar$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(ky.get(\"userdata/avatar/\" + user_id).json());\n\n        case 3:\n          res = _context.sent;\n          return _context.abrupt(\"return\", res.image);\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          showSnackbar({\n            text: \"Get Avatar Pic', \" + _context.t0.message,\n            duration: 20000,\n            style: {\n              backgroundColor: 'rgb(255, 100, 0)'\n            }\n          });\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 7]], Promise);\n}\n\nfunction whatsAppCallback() {\n  var ret;\n  return _regeneratorRuntime.async(function whatsAppCallback$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(Linking.openURL(WHATSTAPP_DEFAULT_URL));\n\n        case 3:\n          ret = _context2.sent;\n          return _context2.abrupt(\"return\", ret);\n\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.log(_context2.t0);\n          displayAlert({\n            title: \"Informa\\xE7\\xE3o\",\n            body: \"N\\xE3o foi poss\\xEDvel abrir o WhatsApp, favor entrar em contato pelo telefone: \" + WHATSAPP_DEFAULT_NUMBER,\n            buttonText: 'Ok'\n          });\n\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 7]], Promise);\n}\n\nexport function DrawerContent(props) {\n  var _this = this;\n\n  var _useState = useState(DEFAULT_AVATAR_B64),\n      _useState2 = _slicedToArray(_useState, 2),\n      userAvatar = _useState2[0],\n      setUserAvatar = _useState2[1];\n\n  var _useState3 = useState('Minhas Áreas'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isFocused = _useState4[0],\n      setIsFocused = _useState4[1];\n\n  var userId = props.user.id;\n  var role = props.user.user_role.find(function (obj) {\n    return obj.role.name === RoleTypeFarmManager;\n  });\n  var menu = role ? [['Minhas Áreas', 'Areas'], ['Serviços', 'Services'], ['Meus Orçamentos', 'Quotations'], ['Histórico de Contratações', 'Checkouts']] : [['Minhas Áreas', 'Areas']];\n  useEffect(function () {\n    (function _callee() {\n      var _await$ImagePicker$re, status, dlUserAvatar;\n\n      return _regeneratorRuntime.async(function _callee$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(Platform.OS !== 'web')) {\n                _context3.next = 6;\n                break;\n              }\n\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n            case 3:\n              _await$ImagePicker$re = _context3.sent;\n              status = _await$ImagePicker$re.status;\n\n              if (status !== 'granted') {\n                displayAlert({\n                  title: \"Erro\",\n                  body: \"\\xC9 necess\\xE1rio dar permiss\\xE3o de acesso ao AgroExplore para selecionar imagens.\",\n                  buttonText: 'Ok'\n                });\n              }\n\n            case 6:\n              _context3.next = 8;\n              return _regeneratorRuntime.awrap(retrieveUserAvatar(userId));\n\n            case 8:\n              dlUserAvatar = _context3.sent;\n\n              if (dlUserAvatar) {\n                setUserAvatar(\"data:image/png;base64,\" + dlUserAvatar);\n              } else {\n                setUserAvatar(DEFAULT_AVATAR_B64);\n              }\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, [userId]);\n\n  var pickImage = function pickImage() {\n    var result, formData, dlUserAvatar;\n    return _regeneratorRuntime.async(function pickImage$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Images,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 0\n            }));\n\n          case 2:\n            result = _context4.sent;\n\n            if (result.cancelled) {\n              _context4.next = 18;\n              break;\n            }\n\n            formData = new FormData();\n            formData.append('image', {\n              uri: result.uri,\n              name: \"avatar.jpg\",\n              type: \"image/jpg\"\n            });\n            _context4.prev = 6;\n            _context4.next = 9;\n            return _regeneratorRuntime.awrap(ky.post(\"userdata/\" + props.user.id + \"/avatar\", {\n              body: formData\n            }));\n\n          case 9:\n            _context4.next = 14;\n            break;\n\n          case 11:\n            _context4.prev = 11;\n            _context4.t0 = _context4[\"catch\"](6);\n            showSnackbar({\n              text: \"Post Avatar Pic', \" + _context4.t0.message,\n              duration: 20000,\n              style: {\n                backgroundColor: 'rgb(255, 100, 0)'\n              }\n            });\n\n          case 14:\n            _context4.next = 16;\n            return _regeneratorRuntime.awrap(retrieveUserAvatar(userId));\n\n          case 16:\n            dlUserAvatar = _context4.sent;\n\n            if (dlUserAvatar) {\n              setUserAvatar(\"data:image/png;base64,\" + dlUserAvatar);\n            } else {\n              setUserAvatar(DEFAULT_AVATAR_B64);\n            }\n\n          case 18:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[6, 11]], Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.mainView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: styles.logoView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 4\n    }\n  }, React.createElement(Image, {\n    source: images.croppedLogo,\n    resizeMode: \"contain\",\n    style: styles.logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  })), React.createElement(View, {\n    style: styles.userView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 4\n    }\n  }, React.createElement(Avatar.Image, {\n    size: styles.avatarSize,\n    source: {\n      uri: userAvatar\n    },\n    onTouchStart: pickImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }), React.createElement(Text, {\n    style: styles.userText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }\n  }, props.user.first_name, \" \", props.user.last_name)), React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 4\n    }\n  }), React.createElement(DrawerContentScrollView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 4\n    }\n  }, menu.map(function (item) {\n    return React.createElement(DrawerItem, {\n      key: item[0],\n      focused: isFocused === item[0],\n      activeTintColor: \"black\",\n      activeBackgroundColor: \" rgba(70, 155, 162, .4)\",\n      label: item[0],\n      labelStyle: styles.labelText,\n      onPress: function onPress() {\n        setIsFocused(item[0]);\n        props.navigation.navigate(item[1]);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 6\n      }\n    });\n  }), (__DEV__ || isDebugModeEnabled()) && React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 6\n    }\n  }, React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }), React.createElement(DrawerItem, {\n    label: \"[dev only] Logout\",\n    labelStyle: styles.labelText,\n    onPress: function _callee2() {\n      return _regeneratorRuntime.async(function _callee2$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _regeneratorRuntime.awrap(userSignOut());\n\n            case 2:\n              BackHandler.exitApp();\n\n            case 3:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }), React.createElement(DrawerItem, {\n    label: \"[dev only] Show-and-copy debug\",\n    labelStyle: styles.labelText,\n    onPress: function onPress() {\n      debug();\n      Clipboard.setString(getDebugValue());\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }), React.createElement(DrawerItem, {\n    label: \"[dev only] Clear debug\",\n    labelStyle: styles.labelText,\n    onPress: clearDebug,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }))), React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 4\n    }\n  }), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 4\n    }\n  }, React.createElement(DrawerItem, {\n    focused: props.state.index === 4,\n    activeTintColor: \"black\",\n    activeBackgroundColor: \" rgba(70, 155, 162, .4)\",\n    label: \"Ajuda\",\n    labelStyle: styles.labelText,\n    onPress: whatsAppCallback,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 5\n    }\n  }), React.createElement(DrawerItem, {\n    focused: props.state.index === 5,\n    activeTintColor: \"black\",\n    activeBackgroundColor: \" rgba(70, 155, 162, .4)\",\n    label: \"Termos e Condi\\xE7\\xF5es de Uso\",\n    labelStyle: styles.labelText,\n    onPress: function onPress() {\n      return props.navigation.navigate('TermsAndConditions');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 5\n    }\n  }), React.createElement(DrawerItem, {\n    focused: props.state.index === 6,\n    activeTintColor: \"black\",\n    activeBackgroundColor: \" rgba(70, 155, 162, .4)\",\n    label: \"Termos de Pol\\xEDtica e Privacidade\",\n    labelStyle: styles.labelText,\n    onPress: function onPress() {\n      return props.navigation.navigate('PrivacyPolicy');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }\n  }), React.createElement(DrawerItem, {\n    label: \"Sair\",\n    labelStyle: styles.labelText,\n    onPress: function onPress() {\n      props.navigation.dispatch(DrawerActions.closeDrawer());\n      BackHandler.exitApp();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 5\n    }\n  })));\n}\nvar styles = createTStyleSheet({\n  avatarSize: 60 * REM_SCALE,\n  mainView: {\n    flex: 1,\n    marginHorizontal: '8rem'\n  },\n  logoView: {\n    paddingTop: '32rem',\n    paddingBottom: '2rem',\n    paddingHorizontal: '16rem',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  logo: {\n    tintColor: '#327387',\n    width: '200rem',\n    height: '60rem'\n  },\n  userView: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: '8rem',\n    paddingVertical: '8rem'\n  },\n  userText: {\n    paddingLeft: '16rem',\n    width: '100%',\n    fontSize: '14rem'\n  },\n  labelText: {\n    fontSize: '14rem'\n  }\n});","map":{"version":3,"sources":["/home/jmgoncalves/git/agro-x/frontend/components/drawer-content.tsx"],"names":["React","useEffect","useState","Divider","Avatar","DrawerItem","DrawerContentScrollView","createTStyleSheet","images","RoleTypeFarmManager","DrawerActions","userSignOut","debug","isDebugModeEnabled","clearDebug","getDebugValue","REM_SCALE","ImagePicker","displayAlert","ky","WHATSTAPP_DEFAULT_URL","DEFAULT_AVATAR_B64","WHATSAPP_DEFAULT_NUMBER","retrieveUserAvatar","user_id","get","json","res","image","showSnackbar","text","message","duration","style","backgroundColor","whatsAppCallback","Linking","openURL","ret","console","log","title","body","buttonText","DrawerContent","props","userAvatar","setUserAvatar","isFocused","setIsFocused","userId","user","id","role","user_role","find","obj","name","menu","Platform","OS","requestCameraRollPermissionsAsync","status","dlUserAvatar","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","result","cancelled","formData","FormData","append","uri","type","post","styles","mainView","logoView","croppedLogo","logo","userView","avatarSize","userText","first_name","last_name","map","item","labelText","navigation","navigate","__DEV__","BackHandler","exitApp","Clipboard","setString","state","index","dispatch","closeDrawer","flex","marginHorizontal","paddingTop","paddingBottom","paddingHorizontal","alignItems","justifyContent","tintColor","width","height","flexDirection","paddingVertical","paddingLeft","fontSize"],"mappings":"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","sourcesContent":["// @ts-nocheck // TODO sorry but TS is not undestanding my awesome code, so I have to shut it down - issue is in line: 79\nimport React, { useEffect, useState } from 'react';\nimport { View, Text, Image, BackHandler, Clipboard, Platform, Linking } from 'react-native';\nimport { Divider, Avatar } from 'react-native-paper';\nimport { DrawerItem, DrawerContentComponentProps, DrawerContentScrollView } from '@react-navigation/drawer';\nimport { createTStyleSheet } from '../src/utils/style';\n\nimport { images } from '../src/assets';\nimport { Models, RoleTypeFarmManager } from '../models';\nimport { DrawerActions } from '@react-navigation/native';\nimport { userSignOut } from '../src/network/auth';\nimport { debug, isDebugModeEnabled, clearDebug, getDebugValue } from '../src/debug';\nimport { REM_SCALE } from '../src/utils';\n\nimport * as ImagePicker from 'expo-image-picker';\nimport { displayAlert } from '../src/utils/alert-messages';\nimport { ky } from '../src/network/ky';\n\nimport { WHATSTAPP_DEFAULT_URL, DEFAULT_AVATAR_B64, WHATSAPP_DEFAULT_NUMBER } from './drawer-constants';\n\n// See https://stackoverflow.com/q/60915266/4135063\ntype DrawerContentProps = DrawerContentComponentProps & {\n\tuser: Models.user;\n};\n\nasync function retrieveUserAvatar(user_id: number): Promise<string> {\n\ttry {\n\t\tconst res = await ky.get(`userdata/avatar/${user_id}`).json<{ image: string }>();\n\t\treturn res.image;\n\t} catch (error) {\n\t\tshowSnackbar({ text: `Get Avatar Pic', ${error.message as string}`, duration: 20000, style: { backgroundColor: 'rgb(255, 100, 0)' } });\n\t}\n}\n\nasync function whatsAppCallback() {\n\ttry {\n\t\tconst ret = await Linking.openURL(WHATSTAPP_DEFAULT_URL);\n\t\treturn ret;\n\t} catch (error) {\n\t\tconsole.log(error);\n\t\tdisplayAlert({\n\t\t\ttitle: `Informação`,\n\t\t\tbody: `Não foi possível abrir o WhatsApp, favor entrar em contato pelo telefone: ${WHATSAPP_DEFAULT_NUMBER}`,\n\t\t\tbuttonText: 'Ok',\n\t\t});\n\t}\n}\n\nexport function DrawerContent(props: DrawerContentProps) {\n\tconst [userAvatar, setUserAvatar] = useState(DEFAULT_AVATAR_B64);\n\tconst [isFocused, setIsFocused] = useState('Minhas Áreas');\n\tconst userId = props.user.id;\n\tconst role = props.user.user_role.find((obj) => obj.role.name === RoleTypeFarmManager);\n\tconst menu = role\n\t\t? [\n\t\t\t\t['Minhas Áreas', 'Areas'],\n\t\t\t\t['Serviços', 'Services'],\n\t\t\t\t['Meus Orçamentos', 'Quotations'],\n\t\t\t\t['Histórico de Contratações', 'Checkouts'],\n\t\t  ]\n\t\t: [['Minhas Áreas', 'Areas']];\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (Platform.OS !== 'web') {\n\t\t\t\tconst { status } = await ImagePicker.requestCameraRollPermissionsAsync();\n\t\t\t\tif (status !== 'granted') {\n\t\t\t\t\tdisplayAlert({\n\t\t\t\t\t\ttitle: `Erro`,\n\t\t\t\t\t\tbody: `É necessário dar permissão de acesso ao AgroExplore para selecionar imagens.`,\n\t\t\t\t\t\tbuttonText: 'Ok',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst dlUserAvatar = await retrieveUserAvatar(userId);\n\t\t\tif (dlUserAvatar) {\n\t\t\t\tsetUserAvatar(`data:image/png;base64,${dlUserAvatar}`);\n\t\t\t} else {\n\t\t\t\tsetUserAvatar(DEFAULT_AVATAR_B64);\n\t\t\t}\n\t\t})();\n\t}, [userId]);\n\n\tconst pickImage = async () => {\n\t\tconst result = await ImagePicker.launchImageLibraryAsync({\n\t\t\tmediaTypes: ImagePicker.MediaTypeOptions.Images,\n\t\t\tallowsEditing: true,\n\t\t\taspect: [4, 3],\n\t\t\tquality: 0,\n\t\t});\n\n\t\tif (!result.cancelled) {\n\t\t\t/* eslint no-undef: [\"off\", { \"typeof\": true }] */\n\t\t\tconst formData = new FormData();\n\n\t\t\tformData.append('image', {\n\t\t\t\turi: result.uri,\n\t\t\t\tname: `avatar.jpg`,\n\t\t\t\ttype: `image/jpg`,\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tawait ky.post(`userdata/${props.user.id}/avatar`, {\n\t\t\t\t\tbody: formData,\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tshowSnackbar({ text: `Post Avatar Pic', ${error.message as string}`, duration: 20000, style: { backgroundColor: 'rgb(255, 100, 0)' } });\n\t\t\t}\n\n\t\t\tconst dlUserAvatar = await retrieveUserAvatar(userId);\n\t\t\tif (dlUserAvatar) {\n\t\t\t\tsetUserAvatar(`data:image/png;base64,${dlUserAvatar}`);\n\t\t\t} else {\n\t\t\t\tsetUserAvatar(DEFAULT_AVATAR_B64);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<View style={styles.mainView}>\n\t\t\t<View style={styles.logoView}>\n\t\t\t\t<Image source={images.croppedLogo} resizeMode=\"contain\" style={styles.logo} />\n\t\t\t</View>\n\t\t\t<View style={styles.userView}>\n\t\t\t\t<Avatar.Image size={styles.avatarSize} source={{ uri: userAvatar }} onTouchStart={pickImage} />\n\t\t\t\t<Text style={styles.userText}>\n\t\t\t\t\t{props.user.first_name} {props.user.last_name}\n\t\t\t\t</Text>\n\t\t\t</View>\n\t\t\t<Divider />\n\t\t\t<DrawerContentScrollView>\n\t\t\t\t{menu.map((item) => (\n\t\t\t\t\t<DrawerItem\n\t\t\t\t\t\tkey={item[0]}\n\t\t\t\t\t\tfocused={isFocused === item[0]}\n\t\t\t\t\t\tactiveTintColor=\"black\"\n\t\t\t\t\t\tactiveBackgroundColor=\" rgba(70, 155, 162, .4)\"\n\t\t\t\t\t\tlabel={item[0]}\n\t\t\t\t\t\tlabelStyle={styles.labelText}\n\t\t\t\t\t\tonPress={() => {\n\t\t\t\t\t\t\tsetIsFocused(item[0]);\n\t\t\t\t\t\t\tprops.navigation.navigate(item[1]);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t\t{(__DEV__ || isDebugModeEnabled()) && (\n\t\t\t\t\t<View>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<DrawerItem\n\t\t\t\t\t\t\tlabel=\"[dev only] Logout\"\n\t\t\t\t\t\t\tlabelStyle={styles.labelText}\n\t\t\t\t\t\t\tonPress={async () => {\n\t\t\t\t\t\t\t\tawait userSignOut();\n\t\t\t\t\t\t\t\tBackHandler.exitApp();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DrawerItem\n\t\t\t\t\t\t\tlabel=\"[dev only] Show-and-copy debug\"\n\t\t\t\t\t\t\tlabelStyle={styles.labelText}\n\t\t\t\t\t\t\tonPress={() => {\n\t\t\t\t\t\t\t\tdebug();\n\t\t\t\t\t\t\t\tClipboard.setString(getDebugValue());\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DrawerItem label=\"[dev only] Clear debug\" labelStyle={styles.labelText} onPress={clearDebug} />\n\t\t\t\t\t</View>\n\t\t\t\t)}\n\t\t\t</DrawerContentScrollView>\n\t\t\t<Divider />\n\t\t\t<View>\n\t\t\t\t<DrawerItem\n\t\t\t\t\tfocused={props.state.index === 4}\n\t\t\t\t\tactiveTintColor=\"black\"\n\t\t\t\t\tactiveBackgroundColor=\" rgba(70, 155, 162, .4)\"\n\t\t\t\t\tlabel=\"Ajuda\"\n\t\t\t\t\tlabelStyle={styles.labelText}\n\t\t\t\t\tonPress={whatsAppCallback}\n\t\t\t\t/>\n\t\t\t\t<DrawerItem\n\t\t\t\t\tfocused={props.state.index === 5}\n\t\t\t\t\tactiveTintColor=\"black\"\n\t\t\t\t\tactiveBackgroundColor=\" rgba(70, 155, 162, .4)\"\n\t\t\t\t\tlabel=\"Termos e Condições de Uso\"\n\t\t\t\t\tlabelStyle={styles.labelText}\n\t\t\t\t\tonPress={() => props.navigation.navigate('TermsAndConditions')}\n\t\t\t\t/>\n\t\t\t\t<DrawerItem\n\t\t\t\t\tfocused={props.state.index === 6}\n\t\t\t\t\tactiveTintColor=\"black\"\n\t\t\t\t\tactiveBackgroundColor=\" rgba(70, 155, 162, .4)\"\n\t\t\t\t\tlabel=\"Termos de Política e Privacidade\"\n\t\t\t\t\tlabelStyle={styles.labelText}\n\t\t\t\t\tonPress={() => props.navigation.navigate('PrivacyPolicy')}\n\t\t\t\t/>\n\t\t\t\t<DrawerItem\n\t\t\t\t\tlabel=\"Sair\"\n\t\t\t\t\tlabelStyle={styles.labelText}\n\t\t\t\t\tonPress={() => {\n\t\t\t\t\t\tprops.navigation.dispatch(DrawerActions.closeDrawer());\n\t\t\t\t\t\tBackHandler.exitApp();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t</View>\n\t);\n}\n\nconst styles = createTStyleSheet({\n\tavatarSize: 60 * REM_SCALE,\n\tmainView: {\n\t\tflex: 1,\n\t\tmarginHorizontal: '8rem',\n\t},\n\tlogoView: {\n\t\tpaddingTop: '32rem',\n\t\tpaddingBottom: '2rem',\n\t\tpaddingHorizontal: '16rem',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center',\n\t},\n\tlogo: {\n\t\ttintColor: '#327387',\n\t\twidth: '200rem',\n\t\theight: '60rem',\n\t},\n\tuserView: {\n\t\tflexDirection: 'row',\n\t\talignItems: 'center',\n\t\tpaddingHorizontal: '8rem',\n\t\tpaddingVertical: '8rem',\n\t},\n\tuserText: {\n\t\tpaddingLeft: '16rem',\n\t\twidth: '100%',\n\t\tfontSize: '14rem',\n\t},\n\tlabelText: {\n\t\tfontSize: '14rem',\n\t},\n});\n"]},"metadata":{},"sourceType":"module"}