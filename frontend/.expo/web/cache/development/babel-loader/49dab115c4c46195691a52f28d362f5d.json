{"ast":null,"code":"var _jsxFileName = \"/home/jmgoncalves/git/agro-x/frontend/components/app-root.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect } from 'react';\nimport { SignIn } from \"./sign-in\";\nimport { useMainSelector } from \"../redux-things\";\nimport { Welcome } from \"./welcome\";\nimport { RootDrawerContainer } from \"./main\";\nimport { hideSplashScreen } from \"../src/splash-screen\";\nimport { preloadFonts } from \"../src/preload/preload-fonts\";\nimport { fetchBackendData, getBackendDataFetchStatus } from \"../src/network\";\nimport { loadFromAsyncStorageIfPresent as loadImageCacheFromAsyncStorageIfPresent } from \"../src/network/helpers/cache-images\";\nimport { TermsAndConditionsFirstLogin } from \"./40-terms-and-conditions/first-login\";\nimport { PrivacyPolicyFirstLogin } from \"./60-privacy-policy/first-login\";\n\nfunction AppRootWhenSignedIn() {\n  useEffect(function () {\n    (function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(loadImageCacheFromAsyncStorageIfPresent());\n\n            case 2:\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(fetchBackendData());\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n  var data = useMainSelector(function (state) {\n    return state.backendData;\n  });\n  var termsAccepted = useMainSelector(function (state) {\n    var _state$backendData$us;\n\n    return (_state$backendData$us = state.backendData.user) == null ? void 0 : _state$backendData$us.user_accepted_terms;\n  });\n  var privacyPolicyAccepted = useMainSelector(function (state) {\n    var _state$backendData$us2;\n\n    return (_state$backendData$us2 = state.backendData.user) == null ? void 0 : _state$backendData$us2.user_accepted_privacy_policy;\n  });\n  var allTermsandConditions = useMainSelector(function (state) {\n    return state.backendData.terms;\n  });\n  var allPrivacyPolicy = useMainSelector(function (state) {\n    return state.backendData.privacyPolicy;\n  });\n  var someDataMissing = Object.entries(data).some(function (item) {\n    return item[1] === null;\n  });\n  if (!getBackendDataFetchStatus() || someDataMissing) return React.createElement(Welcome, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 62\n    }\n  });\n  if ((termsAccepted == null ? void 0 : termsAccepted.length) === 0 || (termsAccepted == null ? void 0 : termsAccepted[0].id_terms_and_conditions) !== (allTermsandConditions == null ? void 0 : allTermsandConditions[0].id)) return React.createElement(TermsAndConditionsFirstLogin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 122\n    }\n  });\n  if ((privacyPolicyAccepted == null ? void 0 : privacyPolicyAccepted.length) === 0 || (privacyPolicyAccepted == null ? void 0 : privacyPolicyAccepted[0].id_privacy_policy) !== (allPrivacyPolicy == null ? void 0 : allPrivacyPolicy[0].id)) return React.createElement(PrivacyPolicyFirstLogin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 127\n    }\n  });\n  return React.createElement(RootDrawerContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  });\n}\n\nexport function AppRoot() {\n  var userId = useMainSelector(function (state) {\n    return state.authData.userId;\n  });\n  var userToken = useMainSelector(function (state) {\n    return state.authData.userToken;\n  });\n  useEffect(function () {\n    (function _callee2() {\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(preloadFonts());\n\n            case 2:\n              hideSplashScreen();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n  useEffect(function () {\n    if (__DEV__) {\n      if (userId && userToken) {\n        console.log('-'.repeat(60) + \"\\n \\nTo experiment with backend requests with this user (ID \" + userId + \"), send HTTP requests with the 'Authorization' header with the following value:\\n \\nBearer \" + userToken + \"\\n \\n\" + '-'.repeat(60));\n      }\n    }\n  }, [userId, userToken]);\n\n  if (userId === null) {\n    return React.createElement(SignIn, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 10\n      }\n    });\n  }\n\n  return React.createElement(AppRootWhenSignedIn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  });\n}","map":{"version":3,"sources":["/home/jmgoncalves/git/agro-x/frontend/components/app-root.tsx"],"names":["React","useEffect","SignIn","useMainSelector","Welcome","RootDrawerContainer","hideSplashScreen","preloadFonts","fetchBackendData","getBackendDataFetchStatus","loadFromAsyncStorageIfPresent","loadImageCacheFromAsyncStorageIfPresent","TermsAndConditionsFirstLogin","PrivacyPolicyFirstLogin","AppRootWhenSignedIn","data","state","backendData","termsAccepted","user","user_accepted_terms","privacyPolicyAccepted","user_accepted_privacy_policy","allTermsandConditions","terms","allPrivacyPolicy","privacyPolicy","someDataMissing","Object","entries","some","item","length","id_terms_and_conditions","id","id_privacy_policy","AppRoot","userId","authData","userToken","__DEV__","console","log","repeat"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { SignIn } from './sign-in';\nimport { useMainSelector } from '../redux-things';\nimport { Welcome } from './welcome';\nimport { RootDrawerContainer } from './main';\n\nimport { hideSplashScreen } from '../src/splash-screen';\nimport { preloadFonts } from '../src/preload/preload-fonts';\nimport { fetchBackendData, getBackendDataFetchStatus } from '../src/network';\nimport { loadFromAsyncStorageIfPresent as loadImageCacheFromAsyncStorageIfPresent } from '../src/network/helpers/cache-images';\nimport { TermsAndConditionsFirstLogin } from './40-terms-and-conditions/first-login';\nimport { PrivacyPolicyFirstLogin } from './60-privacy-policy/first-login';\n\nfunction AppRootWhenSignedIn() {\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tawait loadImageCacheFromAsyncStorageIfPresent();\n\t\t\tawait fetchBackendData();\n\t\t})();\n\t}, []);\n\n\tconst data = useMainSelector((state) => state.backendData);\n\tconst termsAccepted = useMainSelector((state) => state.backendData.user?.user_accepted_terms);\n\tconst privacyPolicyAccepted = useMainSelector((state) => state.backendData.user?.user_accepted_privacy_policy);\n\tconst allTermsandConditions = useMainSelector((state) => state.backendData.terms);\n\tconst allPrivacyPolicy = useMainSelector((state) => state.backendData.privacyPolicy);\n\n\tconst someDataMissing = Object.entries(data).some((item) => item[1] === null);\n\n\tif (!getBackendDataFetchStatus() || someDataMissing) return <Welcome />;\n\n\tif (termsAccepted?.length === 0 || termsAccepted?.[0].id_terms_and_conditions !== allTermsandConditions?.[0].id) return <TermsAndConditionsFirstLogin />;\n\n\tif (privacyPolicyAccepted?.length === 0 || privacyPolicyAccepted?.[0].id_privacy_policy !== allPrivacyPolicy?.[0].id) return <PrivacyPolicyFirstLogin />;\n\n\treturn <RootDrawerContainer />;\n}\n\nexport function AppRoot() {\n\tconst userId = useMainSelector((state) => state.authData.userId);\n\tconst userToken = useMainSelector((state) => state.authData.userToken);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tawait preloadFonts();\n\t\t\thideSplashScreen();\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (__DEV__) {\n\t\t\tif (userId && userToken) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t`${'-'.repeat(\n\t\t\t\t\t\t60,\n\t\t\t\t\t)}\\n \\nTo experiment with backend requests with this user (ID ${userId}), send HTTP requests with the 'Authorization' header with the following value:\\n \\nBearer ${userToken}\\n \\n${'-'.repeat(\n\t\t\t\t\t\t60,\n\t\t\t\t\t)}`,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}, [userId, userToken]);\n\n\tif (userId === null) {\n\t\treturn <SignIn />;\n\t}\n\n\treturn <AppRootWhenSignedIn />;\n}\n"]},"metadata":{},"sourceType":"module"}