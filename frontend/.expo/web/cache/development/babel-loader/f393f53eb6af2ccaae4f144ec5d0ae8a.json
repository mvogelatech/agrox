{"ast":null,"code":"var GLOBAL_RESET_ACTION_NAME = 'GLOBAL_RESET';\nexport function createReducer(initialState, handlers) {\n  return function (state, action) {\n    if (state === undefined || action.type === GLOBAL_RESET_ACTION_NAME) return initialState;\n    var handler = handlers[action.type];\n    if (!handler) return state;\n    if (typeof handler !== 'function') throw new TypeError(\"Expected reducer handler '\" + action.type + \"' to be a function, got \" + typeof handler);\n    return handler(state, action);\n  };\n}","map":{"version":3,"sources":["/home/jmgoncalves/git/agro-x/frontend/redux-things/tree/tree-building-helpers/create-reducer.ts"],"names":["GLOBAL_RESET_ACTION_NAME","createReducer","initialState","handlers","state","action","undefined","type","handler","TypeError"],"mappings":"AAGA,IAAMA,wBAAwB,GAAG,cAAjC;AAkBA,OAAO,SAASC,aAAT,CAA4DC,YAA5D,EAAiFC,QAAjF,EAAgI;AACtI,SAAO,UAACC,KAAD,EAA2BC,MAA3B,EAAuH;AAC7H,QAAID,KAAK,KAAKE,SAAV,IAAuBD,MAAM,CAACE,IAAP,KAAgBP,wBAA3C,EAAqE,OAAOE,YAAP;AACrE,QAAMM,OAAO,GAAGL,QAAQ,CAACE,MAAM,CAACE,IAAR,CAAxB;AACA,QAAI,CAACC,OAAL,EAAc,OAAOJ,KAAP;AACd,QAAI,OAAOI,OAAP,KAAmB,UAAvB,EAAmC,MAAM,IAAIC,SAAJ,gCAA2CJ,MAAM,CAACE,IAAlD,gCAAiF,OAAOC,OAAxF,CAAN;AACnC,WAAOA,OAAO,CAACJ,KAAD,EAAQC,MAAR,CAAd;AACA,GAND;AAOA","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { BuildActionSpec } from './build-action-type-spec';\n\nconst GLOBAL_RESET_ACTION_NAME = 'GLOBAL_RESET';\n\nexport type GlobalResetActionSpec = BuildActionSpec<\n\t[\n\t\t{\n\t\t\ttype: typeof GLOBAL_RESET_ACTION_NAME;\n\t\t},\n\t]\n>;\n\ntype Handlers<State, ActionDictionary> = {\n\t[ActionTypeName in keyof ActionDictionary]: (prevState: State, action: ActionDictionary[ActionTypeName]) => State;\n};\n\ntype Values<T> = T[keyof T];\n\ntype LooseActionSpec = BuildActionSpec<Array<{ type: string }>>;\n\nexport function createReducer<State, Spec extends LooseActionSpec>(initialState: State, handlers: Handlers<State, Spec['DICTIONARY']>) {\n\treturn (state: State | undefined, action: Values<Spec['DICTIONARY']> | Values<GlobalResetActionSpec['DICTIONARY']>): State => {\n\t\tif (state === undefined || action.type === GLOBAL_RESET_ACTION_NAME) return initialState;\n\t\tconst handler = handlers[action.type];\n\t\tif (!handler) return state;\n\t\tif (typeof handler !== 'function') throw new TypeError(`Expected reducer handler '${action.type}' to be a function, got ${typeof handler}`);\n\t\treturn handler(state, action as any);\n\t};\n}\n"]},"metadata":{},"sourceType":"module"}