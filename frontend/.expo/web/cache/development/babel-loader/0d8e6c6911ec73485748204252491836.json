{"ast":null,"code":"function millisecondsToDate(ms) {\n  var result = new Date();\n  result.setTime(ms);\n  return result;\n}\n\nexport function parseAgroNotification(notification) {\n  var _notification$request, _notification$request2;\n\n  var silent = notification.request.content.data.__agro_silent__;\n  return {\n    messageTitle: (_notification$request = notification.request.content.title) != null ? _notification$request : undefined,\n    messageContent: (_notification$request2 = notification.request.content.body) != null ? _notification$request2 : undefined,\n    agroNotification: notification.request.content.data.agroNotification,\n    silent: Boolean(silent),\n    fcmMessageId: notification.request.identifier,\n    fcmDate: millisecondsToDate(notification.date)\n  };\n}","map":{"version":3,"sources":["/home/jmgoncalves/git/agro-x/frontend/src/notifications/parse-agro-notification.ts"],"names":["millisecondsToDate","ms","result","Date","setTime","parseAgroNotification","notification","silent","request","content","data","__agro_silent__","messageTitle","title","undefined","messageContent","body","agroNotification","Boolean","fcmMessageId","identifier","fcmDate","date"],"mappings":"AAeA,SAASA,kBAAT,CAA4BC,EAA5B,EAA8C;AAC7C,MAAMC,MAAM,GAAG,IAAIC,IAAJ,EAAf;AACAD,EAAAA,MAAM,CAACE,OAAP,CAAeH,EAAf;AACA,SAAOC,MAAP;AACA;;AAED,OAAO,SAASG,qBAAT,CAA+BC,YAA/B,EAAmF;AAAA;;AAEzF,MAAMC,MAAM,GAAGD,YAAY,CAACE,OAAb,CAAqBC,OAArB,CAA6BC,IAA7B,CAAkCC,eAAjD;AAEA,SAAO;AACNC,IAAAA,YAAY,2BAAEN,YAAY,CAACE,OAAb,CAAqBC,OAArB,CAA6BI,KAA/B,oCAAwCC,SAD9C;AAENC,IAAAA,cAAc,4BAAET,YAAY,CAACE,OAAb,CAAqBC,OAArB,CAA6BO,IAA/B,qCAAuCF,SAF/C;AAGNG,IAAAA,gBAAgB,EAAEX,YAAY,CAACE,OAAb,CAAqBC,OAArB,CAA6BC,IAA7B,CAAkCO,gBAH9C;AAINV,IAAAA,MAAM,EAAEW,OAAO,CAACX,MAAD,CAJT;AAKNY,IAAAA,YAAY,EAAEb,YAAY,CAACE,OAAb,CAAqBY,UAL7B;AAMNC,IAAAA,OAAO,EAAErB,kBAAkB,CAACM,YAAY,CAACgB,IAAd;AANrB,GAAP;AAQA","sourcesContent":["import type { Notification } from 'expo-notifications';\nimport { Models } from '../../models';\n\nexport type ParsedAgroNotification = {\n\t// Fields defined by backend, see `backend/agrox-api/src/notification/helpers/push-to-token.ts`\n\tmessageTitle?: string;\n\tmessageContent?: string;\n\tagroNotification: Models.notification;\n\tsilent: boolean;\n\n\t// Extra fields available in frontend\n\tfcmMessageId: string;\n\tfcmDate: Date;\n};\n\nfunction millisecondsToDate(ms: number): Date {\n\tconst result = new Date();\n\tresult.setTime(ms);\n\treturn result;\n}\n\nexport function parseAgroNotification(notification: Notification): ParsedAgroNotification {\n\t// We have the convention of considering a notification to be silent if it has set the `__agro_silent__` data field to anything truthy.\n\tconst silent = notification.request.content.data.__agro_silent__; // The `content.data` comes from `data.body` backend request to FCM server\n\n\treturn {\n\t\tmessageTitle: notification.request.content.title ?? undefined, // This comes from `data.title` backend request to FCM server\n\t\tmessageContent: notification.request.content.body ?? undefined, // This comes from `data.message` backend request to FCM server\n\t\tagroNotification: notification.request.content.data.agroNotification as Models.notification, // The `content.data` comes from `data.body` backend request to FCM server\n\t\tsilent: Boolean(silent),\n\t\tfcmMessageId: notification.request.identifier,\n\t\tfcmDate: millisecondsToDate(notification.date),\n\t};\n}\n"]},"metadata":{},"sourceType":"module"}